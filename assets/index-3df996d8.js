import{s as l,F as L,u as k,D as I,x as D,y as J,r as o,z as A,A as u,j as s,b as i,H as F,I as V,C as O,g as N,d as Y,O as T,i as U,k as B,l as H,m as P,a as Q}from"./index-cf156ef5.js";import{c as E}from"./comment-8f34614d.js";const K=l.div`
  display: flex;
  flex-direction: column;
  padding: 1.6rem 12%;
  overflow: auto;
  gap: 1.4rem;
  /* mobile styles */
  @media only screen and (max-width: 768px) {
    padding: 1.6rem 4.2%;
  }
`,$="/assets/clap-0f9d38a4.png",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAAAwmAAAMJgE29OC7AAAF7GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIyLTA3LTMwVDA2OjI4OjA1KzA1OjMwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMi0wOC0wN1QwODo1NToyNCswNTozMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMi0wOC0wN1QwODo1NToyNCswNTozMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZGYyYTVmYi1iMzhkLTNmNGUtYjAzOS01NWIxZjg3MzIxZDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OGYzOGFmNjUtYWRiNy0yYzQzLWE3ZTktMDg5ZDRiOGY1MTYyIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OGYzOGFmNjUtYWRiNy0yYzQzLWE3ZTktMDg5ZDRiOGY1MTYyIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4ZjM4YWY2NS1hZGI3LTJjNDMtYTdlOS0wODlkNGI4ZjUxNjIiIHN0RXZ0OndoZW49IjIwMjItMDctMzBUMDY6Mjg6MDUrMDU6MzAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGRmMmE1ZmItYjM4ZC0zZjRlLWIwMzktNTViMWY4NzMyMWQ0IiBzdEV2dDp3aGVuPSIyMDIyLTA4LTA3VDA4OjU1OjI0KzA1OjMwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+rY4MBQAABapJREFUWIXF2XnMVOUVBvCfwAeYiqixEVEJGiNKLW4lDa6RuFMKatQQTNO6JO5iJMY17lurEWPcsdpWcWlq1GilVdsq4oJGbN1wI2psgpjWpXUD5PrHeV/v/e7MfH4z3xCfZJKZc+ae+8y5533Oed+hcxyJv2NoxbYWNsfgAcRdYzgUBaZXbNvhf9j1+yD0XRiKd7AYg5JtF/EjDhhA3H1whcanNAU3tBNoNyzChIrtzERwUvo8KX3erxOm4oe/jHcxpGLfEyvwWjvBxuG/eAPrJ9tofIU7u0T4l+n6GRXbz7ASL6X7tYX8yB8QCwzuSLaNMDG9n9IB2R4sxVvK7O6F1SJJbZPNOCWRuiyRHo8FQh1G40ls20Hcw1PcIypkPxeZHdMp2YzbUvAfDTRQBc9jicj07in+ywaQ2SqGYRp+0I1gCXtgm/R+b8zHZhX//ji7i/f7FmNxDI7DFjXftjhRNJ2N+xlvHOaJjL/YFYYVTBONo0ivz5SKcVLFXmC5Ug6bYW2R0RVi4Z2DdbpJ9ueJyEtCLX4idHMpZiXfoyLLk/EfPKt1G8+K82edLeI+MVVk4QWMqthnKDN6n6j9jHOS/YctYvYIBeoI24tFsAi/qPkOSmSfxgY135WJ1IM1svAQPtbdhYsg+yE+EQJeYN/km5o+/1M0jiqOUDaZETXfhck3u9tkdxVZeA9bise0BAtFza4WWR9Vuy43l/s1ZjaTXS3UomvYCf/HB0JaMi5S1uVzWK923XHJ95cmZC9Pvrfwenp/VvJNwEz8tFOyy8XUVC/8P6QbLdaopUcrM1uXoJzZ34q6HS709RP8SW/Ju008zX5hF3wqymCrmm96CrhAZ2VwjXJogkOSfQXOE1KYR9bj+0P2x4nsMo2ZPTAFekE5XmbkzP5VZK6Ky5Lvxib3e1hkeFzN/qZQnT4xVmT1fWxd8+Wm8KLGMsg1e7/oTlXkzN6id2Z7lAPUMbVr1sdHuKcvskPwlBjGJ9R8B6XACzWK/CyldNXL4JLkm1OzD8ZdyTer5jtATG2rRHm0xMwWAaYpdXbDFtfM1yj+mezcJve6Wbm4rsW62AS3JtsqkaSW6BENYbHeKzM3hXq7zTgKv9OY2Sx7c/UugyFKhblbbChX4xWh9YXYghU4rS/CeVg+tGafLYaVervtC1ln59Tsa4l9X1V3ifrNT2m8KLkbk20bLXCpqN36I28HPSlOXmBVDKqQOLfm2zfZJ1ds45OtZVksEIU+EGyJr3GTRjXImT2jds0IPCMaVPUpnpG+v1Orm30oamsgGKxRCuF2zTO7Lp5IvqnJNkZIWYE/Kg9nGrASVw+MbwOGiWzXa5Zo2Y8pzx+GifWyTOxQ5mic7nrhc20eAfUDt2heBiPFQv4Ch4nzi6VKmTu9P8HfEMN0N3Gq5jX7DzE3/EY89kJMbdcLeftSqFafuAf/tmaPSEeIOaMQbXelmFlmK9v5KDHOzvuuYHlnsP0aIErMBplsIchepfk2f7nYdPaJTUU7nNM1iiVG4G9Kso9g5ybfG4rztTFW/l788o53qU2wjlhghajPeifNOBj/St+7WWOrb4rNxWJYoLfwd4r1xN8JBU7Q/ABkO9GSC7wtBq22kHcMl3fKMqFaBkc38W8oVKIQqnC2aCQd4dcp0HU6OxbaQszV1WPTjOEi2x8oZ4762VtHyEPMq+JEsT8YgmOFLK0SO5QqJouj00LMDxO7QbSKGUKbC7HvOkosyJFiUQwXj3aSOHJaotyVVHcKW4vZtxDbr1/p/d9FVzFaHNZV9XOZ2PovS5+z73GxSc3YCBeLbH+JCzSeX6wRjFSezeZFslD8r3GJmAVGVr6/MU4W3azAvUKBuob+StjBYtsyMZF5ThyrLhflMQY7YMcU83GhNg93kyztae4gccgyTQwoY5XZ/UicJTwhtvuLukexN74BKxWNbskiXvwAAAAASUVORK5CYII=",_=l.div`
  display: flex;
  flex-direction: column;
  padding: 0.42% 0.84%;
  border-radius: 0.14rem;
  gap: 0.14rem;
  animation: ${L} 1s;
  ${e=>e.theme.boxShadowNoHover}
  /* mobile styles */
  @media only screen and (max-width: 768px) {
    padding: 0.5rem 0.7rem;
  }
`,ee=l.div`
  display: flex;
  flex-direction: column;
`,te=l.span`
  font-family: ${e=>e.theme.fontFamily};;
  font-size: 1.4rem;
  color: ${e=>e.theme.fontColor};
`,ie=l.span`
  font-family: ${e=>e.theme.fontFamily};;
  font-size: 1.2rem;
  color: ${e=>e.theme.fontColor};
`,ne=l.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,ae=l.div`
  display: flex;
  align-items: center;
  gap: 0.14rem;
  div {
    display: flex;
    align-items: center;
    cursor: pointer;
    gap: 0.14rem;
    &:hover {
      opacity: 0.5;
    }
    span {
      font-family: ${e=>e.theme.fontFamily};;
      font-size: 1.2rem;
      color: ${e=>e.theme.fontColor};
    }
  }
`,ce=l.img.attrs(e=>({src:e.liked?$:q,alt:"clap"}))`
  width: 1.6rem;
  height: auto;
  opacity: 0.9;
  &:hover {opacity: 0.5;}
  ${e=>e.dark&&!e.liked&&"filter: invert(100%);"}
  ${e=>e.disabled&&"cursor: not-allowed;"}
`,oe={title:"██████████████",description:"██████████████",credential_link:"██████████████",verify_url:"██████████████"},se=({id:e})=>{const{isDark:c,language:m}=k(),{setCurrAchievement:h}=I(),{setCommentsMeta:M,onUnmount:W,setCallbacks:b}=D(),{likes:G,addLike:p,removeLike:g,token:r}=J(),[n,x]=o.useState(oe),[a,d]=o.useState(),[z,y]=o.useState(!1),[f,Z]=o.useState(!1),C=o.useRef(!1);o.useEffect(()=>{if(!C.current&&r)return y(G.includes(e)),A.post(`${u}/api/achievements/${e}`,{},{headers:{Authorization:`Bearer ${r}`}}).then(({data:t})=>{x(t),A.post(`${u}/api/achievements/stats/${e}`,{},{headers:{Authorization:`Bearer ${r}`}}).then(({data:X})=>{d(X),C.current=!0})}),()=>W()},[r]);const R=o.useCallback(()=>{h(n)},[n,h]),j=()=>{d(t=>({comments:`${+((t==null?void 0:t.comments)||0)+1}`,appreciations:t==null?void 0:t.appreciations}))},w=()=>{d(t=>({comments:`${+((t==null?void 0:t.comments)||0)-1}`,appreciations:t==null?void 0:t.appreciations}))},S=o.useCallback(()=>{M("achievements",e+"||"+(n==null?void 0:n.title)),b({incCmt:j,decCmt:w})},[e,n==null?void 0:n.title,M,b]),v=()=>{f||(Z(!0),z?A.put(`${u}/api/achievements/dislike/${e}`,{},{headers:{Authorization:`Bearer ${r}`}}).then(()=>{d(t=>({appreciations:`${+((t==null?void 0:t.appreciations)||0)-1}`,comments:t==null?void 0:t.comments})),g(e),y(!1),Z(!1)}):A.put(`${u}/api/achievements/like/${e}`,{},{headers:{Authorization:`Bearer ${r}`}}).then(()=>{d(t=>({appreciations:`${+((t==null?void 0:t.appreciations)||0)+1}`,comments:t==null?void 0:t.comments})),p(e),y(!0),Z(!1)}))};return s(_,{children:[s(ee,{children:[i(te,{children:n==null?void 0:n.title}),i(F,{})]}),i(ie,{children:n==null?void 0:n.description}),s(ne,{children:[s(ae,{children:[s("div",{onClick:v,children:[i(ce,{disabled:f,liked:z,dark:c}),i("span",{children:(a==null?void 0:a.appreciations)!=="0"?a==null?void 0:a.appreciations:""})]}),s("div",{onClick:S,children:[i(V,{dark:c,src:E,alt:"comment"}),i("span",{children:(a==null?void 0:a.comments)!=="0"?a==null?void 0:a.comments:""})]})]}),i(O,{onClick:R,children:N.showCred[+m]},m)]})]})},le=()=>{const{achievements:e}=I();return i(Y,{children:e.map(c=>i(se,{id:c},c))})},me=()=>{const{isDark:e,language:c}=k(),{currAchievement:m,setCurrAchievement:h}=I();return m?i(T,{children:s(U,{children:[s(B,{children:[i("div",{}),i(H,{dark:e,onClick:()=>h(null)})]}),i(P,{src:m.credential_link,alt:"credential"}),m.verify_url&&i(O,{children:i("a",{href:m.verify_url,target:"_blank",rel:"noreferrer",children:N.verify[+c]})})]})}):i("div",{})},he=()=>{const{setMenu:e}=Q(),{currAchievement:c}=I();return o.useEffect(()=>e(6),[]),s(Y,{children:[c&&i(me,{}),i(K,{children:i(le,{})})]})};export{he as default};
