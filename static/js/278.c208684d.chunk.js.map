{"version":3,"file":"static/js/278.c208684d.chunk.js","mappings":"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","sources":["pages/achievements/styles.tsx","components/achievements/styles.tsx","components/achievements/achievement-card.component.tsx","components/achievements/index.tsx","components/achievements/achievement-overview.component.tsx","pages/achievements/index.tsx"],"sourcesContent":["import styled from 'styled-components';\r\n\r\nexport const Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 1.6rem 12%;\r\n  overflow: auto;\r\n  gap: 1.4rem;\r\n  /* mobile styles */\r\n  @media only screen and (max-width: 768px) {\r\n    padding: 1.6rem 4.2%;\r\n  }\r\n`;\r\n","import styled from \"styled-components\";\r\nimport { FadeAnim1 } from \"../../utils/styles.util\";\r\nimport clap from '../../assets/icons/clap.png';\r\nimport clapUnfilled from '../../assets/icons/clap-unfilled.png';\r\n\r\nexport const Card = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0.42% 0.84%;\r\n  border-radius: 0.14rem;\r\n  gap: 0.14rem;\r\n  animation: ${FadeAnim1} 1s;\r\n  ${props => props.theme.boxShadowNoHover}\r\n  /* mobile styles */\r\n  @media only screen and (max-width: 768px) {\r\n    padding: 0.5rem 0.7rem;\r\n  }\r\n`;\r\n\r\nexport const Top = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nexport const Name = styled.span`\r\n  font-family: core-sans-g;\r\n  font-size: 1.4rem;\r\n  color: ${(props) => props.theme.fontColor};\r\n`;\r\n\r\nexport const Description = styled.span`\r\n  font-family: core-sans-g;\r\n  font-size: 1.2rem;\r\n  color: ${(props) => props.theme.fontColor};\r\n`;\r\n\r\nexport const Footer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const Interactions = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.14rem;\r\n  div {\r\n    display: flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    gap: 0.14rem;\r\n    &:hover {\r\n      opacity: 0.5;\r\n    }\r\n    span {\r\n      font-family: core-sans-g;\r\n      font-size: 1.2rem;\r\n      color: ${(props) => props.theme.fontColor};\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ClapIcon = styled.img.attrs((props: { liked: boolean }) => ({\r\n  src: props.liked ? clap : clapUnfilled,\r\n  alt: \"clap\",\r\n}))<{ dark: boolean; liked: boolean; disabled?: boolean }>`\r\n  width: 1.6rem;\r\n  height: auto;\r\n  opacity: 0.9;\r\n  &:hover {opacity: 0.5;}\r\n  ${props => (props.dark && !props.liked) && `filter: invert(100%);`}\r\n  ${props => props.disabled && `cursor: not-allowed;`}\r\n`;\r\n","import { useCallback, useEffect, useState, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Achievement, AchievementStats } from \"../../data/achievements.data\";\r\nimport commentIcon from '../../assets/icons/comment.png';\r\nimport { API_URL } from \"../../utils/constants.util\";\r\n\r\nimport { \r\n  Card, Top, Name, Description, \r\n  Footer, Interactions, \r\n  ClapIcon\r\n} from './styles';\r\nimport { InteractionIcon } from \"../../utils/styles.util\";\r\nimport { CredBtn, HrzntlLn } from \"../../utils/styles.util\";\r\nimport { transcriptPageTranslations } from '../../utils/translations.util';\r\nimport { useCommonContext } from '../../contexts/common.context';\r\nimport { useAchievementContext } from '../../contexts/achievement.context';\r\nimport { useCommentsContext } from '../../contexts/comments.context';\r\nimport { useUserContext } from \"../../contexts/user.context\";\r\n\r\nconst defaultAchievement: Achievement = {\r\n  title: '██████████████',\r\n  description: '██████████████',\r\n  credential_link: '██████████████',\r\n  verify_url: '██████████████'\r\n};\r\n\r\ninterface AchievementCardProps {\r\n  id: string;\r\n}\r\n\r\nconst AchievementCard: React.FC<AchievementCardProps> = ({id}) => {\r\n  const { isDark, language } = useCommonContext();\r\n  const { setCurrAchievement } = useAchievementContext();\r\n  const { setCommentsMeta, onUnmount, setCallbacks } = useCommentsContext();\r\n  const { likes, addLike, removeLike, token } = useUserContext();\r\n\r\n  const [achievement, setAchievement] = useState<Achievement>(defaultAchievement);\r\n  const [stats, setStats] = useState<AchievementStats|null>();\r\n  const [liked, setLiked] = useState<boolean>(false);\r\n  const [disableClap, setDisableClap] = useState<boolean>(false);\r\n  const fetched = useRef<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    if (fetched.current) return;\r\n    if (!token) return;\r\n    setLiked(likes.includes(id));\r\n    axios.post(\r\n      `${API_URL}/api/achievements/${id}`,\r\n      {},\r\n      {headers: {Authorization: `Bearer ${token}`}}\r\n    ).then(({data}) => {\r\n      setAchievement(data);\r\n      axios.post(\r\n        `${API_URL}/api/achievements/stats/${id}`,\r\n        {},\r\n        {headers: {Authorization: `Bearer ${token}`}}\r\n      ).then(({data: data1}) => {\r\n        setStats(data1);\r\n        fetched.current = true;\r\n      });\r\n    });\r\n    return () => onUnmount!();\r\n  }, [token]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setCurrAchievement!(achievement as Achievement);\r\n  }, [achievement, setCurrAchievement]);\r\n\r\n  const incCmt = () => {\r\n    setStats(prev => ({\r\n      comments: `${+(prev?.comments as string||0) + 1}`,\r\n      appreciations: prev?.appreciations as string,\r\n    }));\r\n  };\r\n\r\n  const decCmt = () => {\r\n    setStats(prev => ({\r\n      comments: `${+(prev?.comments as string||0) - 1}`,\r\n      appreciations: prev?.appreciations as string,\r\n    }));\r\n  };\r\n\r\n  const showComments = useCallback(() => {\r\n    setCommentsMeta!(\"achievements\", id+'||'+achievement?.title as string);\r\n    setCallbacks!({incCmt, decCmt});\r\n  },[id, achievement?.title, setCommentsMeta, setCallbacks]);\r\n\r\n  const toggleLike = () => {\r\n    if (disableClap) return;\r\n    setDisableClap(true);\r\n    if (!liked) {\r\n      axios.put(\r\n        `${API_URL}/api/achievements/like/${id}`,\r\n        {},\r\n        {headers: {Authorization: `Bearer ${token}`}}\r\n      ).then(() => {\r\n        setStats(prev => ({\r\n          appreciations: `${(+(prev?.appreciations as string||0))+1}`, \r\n          comments: prev?.comments as string\r\n        }));\r\n        addLike!(id);\r\n        setLiked(true);\r\n        setDisableClap(false);\r\n      });\r\n    } else {\r\n      axios.put(\r\n        `${API_URL}/api/achievements/dislike/${id}`,\r\n        {},\r\n        {headers: {Authorization: `Bearer ${token}`}}\r\n      ).then(() => {\r\n        setStats(prev => ({\r\n          appreciations: `${(+(prev?.appreciations as string||0))-1}`, \r\n          comments: prev?.comments as string\r\n        }));\r\n        removeLike!(id);\r\n        setLiked(false);\r\n        setDisableClap(false);\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <Top>\r\n        <Name>{achievement?.title}</Name>\r\n        <HrzntlLn />\r\n      </Top>\r\n      <Description>{achievement?.description}</Description>\r\n      <Footer>\r\n        <Interactions>\r\n          <div onClick={toggleLike}>\r\n            <ClapIcon disabled={disableClap} liked={liked} dark={isDark} />\r\n            <span>\r\n              {stats?.appreciations !== \"0\" ? stats?.appreciations : \"\"}\r\n            </span>\r\n          </div>\r\n          <div onClick={showComments}>\r\n            <InteractionIcon dark={isDark} src={commentIcon} alt=\"comment\" />\r\n            <span>{stats?.comments !== \"0\" ? stats?.comments : \"\"}</span>\r\n          </div>\r\n        </Interactions>\r\n        <CredBtn key={language} onClick={handleClick}>\r\n          {transcriptPageTranslations.showCred[+language]}\r\n        </CredBtn>\r\n      </Footer>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default AchievementCard;\r\n","import AchievementCard from \"./achievement-card.component\";\r\nimport { useAchievementContext } from '../../contexts/achievement.context';\r\n\r\ninterface AchievementsProps {}\r\n\r\nconst Achievements: React.FC<AchievementsProps> = () => {\r\n  const { achievements } = useAchievementContext();\r\n  \r\n  return (\r\n    <>\r\n      {achievements.map(achievementId => (\r\n        <AchievementCard key={achievementId} id={achievementId} />\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Achievements;\r\n","import { \r\n  OverviewContainer, OverviewBox, \r\n  CloseIcon, OverviewImage,\r\n  CredBtn, OverviewHeader\r\n} from '../../utils/styles.util';\r\nimport { transcriptPageTranslations } from '../../utils/translations.util';\r\n\r\nimport { useCommonContext } from '../../contexts/common.context';\r\nimport { useAchievementContext } from '../../contexts/achievement.context';\r\n\r\ninterface AchievementOverviewProps {}\r\n\r\nconst AchievementOverview: React.FC<AchievementOverviewProps> = () => {\r\n  const { isDark, language } = useCommonContext();\r\n  const { currAchievement, setCurrAchievement } = useAchievementContext();\r\n\r\n  if (!currAchievement) return <div />;\r\n\r\n  return (\r\n    <OverviewContainer>\r\n      <OverviewBox>\r\n        <OverviewHeader>\r\n          <div />\r\n          <CloseIcon dark={isDark} onClick={() => setCurrAchievement!(null)} />\r\n        </OverviewHeader>\r\n        <OverviewImage\r\n          src={currAchievement.credential_link}\r\n          alt=\"credential\"\r\n        />\r\n        {currAchievement.verify_url && (\r\n          <CredBtn>\r\n            <a\r\n              href={currAchievement.verify_url}\r\n              target=\"_blank\"\r\n              rel=\"noreferrer\"\r\n            >\r\n              {transcriptPageTranslations.verify[+language]}\r\n            </a>\r\n          </CredBtn>\r\n        )}\r\n      </OverviewBox>\r\n    </OverviewContainer>\r\n  );\r\n};\r\n\r\nexport default AchievementOverview;\r\n","import { useEffect } from \"react\";\r\n\r\nimport { Container } from \"./styles\";\r\n\r\nimport Achievements from \"../../components/achievements\";\r\nimport AchievementOverview from \"../../components/achievements/achievement-overview.component\";\r\nimport { useMenuContext } from \"../../contexts/menu.context\";\r\nimport { useAchievementContext } from '../../contexts/achievement.context';\r\n\r\ninterface AchievementsPageProps {}\r\n\r\nconst AchievementsPage: React.FC<AchievementsPageProps> = () => {\r\n  const { setMenu } = useMenuContext();\r\n  const { currAchievement } = useAchievementContext();\r\n\r\n  useEffect(() => setMenu!(5), []);\r\n  \r\n  return (\r\n    <>\r\n      {currAchievement && <AchievementOverview />}\r\n      <Container>\r\n        <Achievements />\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AchievementsPage;\r\n"],"names":["Container","styled","Card","FadeAnim1","props","theme","boxShadowNoHover","Top","Name","fontColor","Description","Footer","Interactions","ClapIcon","src","liked","alt","dark","disabled","defaultAchievement","title","description","credential_link","verify_url","id","useCommonContext","isDark","language","setCurrAchievement","useAchievementContext","useCommentsContext","setCommentsMeta","onUnmount","setCallbacks","useUserContext","likes","addLike","removeLike","token","useState","achievement","setAchievement","stats","setStats","setLiked","disableClap","setDisableClap","fetched","useRef","useEffect","current","includes","axios","API_URL","headers","Authorization","then","data","data1","handleClick","useCallback","incCmt","prev","comments","appreciations","decCmt","showComments","onClick","commentIcon","transcriptPageTranslations","achievements","map","achievementId","currAchievement","href","target","rel","setMenu","useMenuContext"],"sourceRoot":""}